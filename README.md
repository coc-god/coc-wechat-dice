# CoC éª°å¨˜ ğŸ²

> **å…‹è‹é²çš„å‘¼å”¤ 7.0** å¾®ä¿¡ç¾¤éª°å¨˜ï¼ŒåŸºäº [Wechaty](https://wechaty.js.org/) å®ç°ã€‚
> @å¥¹æ·éª°ï¼Œå¥¹è¿˜ä¼šèƒŒèå£«æ¯”äºšã€‚

---

## åŠŸèƒ½ä¸€è§ˆ

| æŒ‡ä»¤ | è¯´æ˜ |
|------|------|
| `.r [è¡¨è¾¾å¼]` | æ·éª°ï¼š`.r`ã€`.r 3d6`ã€`.r 1d8+2`ã€`.rd6` |
| `.rc æŠ€èƒ½ [ç›®æ ‡å€¼] [b/p]` | æŠ€èƒ½æ£€å®šï¼Œæ”¯æŒå¥–åŠ±/æƒ©ç½šéª° |
| `.sc SANå€¼ æˆåŠŸæŸå¤±/å¤±è´¥æŸå¤±` | ç†æ™ºæ£€å®š |
| `.rop æŠ€èƒ½1 å€¼1 vs æŠ€èƒ½2 å€¼2` | å¯¹æŠ—æ£€å®š |
| `.fight / .fire / .dodge å€¼ [b/p]` | æˆ˜æ–—æ£€å®š |
| `.dmg è¡¨è¾¾å¼` | ä¼¤å®³éª° |
| `.coc [æ•°é‡]` | éšæœºç”Ÿæˆè°ƒæŸ¥å‘˜å±æ€§ï¼ˆæœ€å¤š10ç»„ï¼‰ |
| `.save [n]` | ç¡®è®¤ä¿å­˜ `.coc` ç”Ÿæˆçš„å±æ€§åˆ°äººç‰©å¡ |
| `.st æŠ€èƒ½ å€¼ [æŠ€èƒ½ å€¼ ...]` | æ‰‹åŠ¨å½•å…¥æŠ€èƒ½/å±æ€§ï¼Œæ”¯æŒæ‰¹é‡ |
| `.template` | ç§ä¿¡å‘é€ç©ºç™½äººç‰©å¡æ¨¡æ¿ |
| `.show` | æŸ¥çœ‹è‡ªå·±çš„äººç‰©å¡ |
| `.luck set å€¼` | è®¾ç½®å¹¸è¿å€¼ |
| `.luck spend æ•°é‡ æŠ€èƒ½å æŠ€èƒ½å€¼` | æ¶ˆè€—å¹¸è¿ç¿»è½¬æ£€å®š |
| `.kp` | KPåŠŸèƒ½ï¼ˆè§ä¸‹æ–¹ï¼‰ |
| `.help [æŒ‡ä»¤]` | æŸ¥çœ‹å¸®åŠ© |

æ‰€æœ‰æŒ‡ä»¤å‡é€šè¿‡ **@éª°å¨˜** åœ¨ç¾¤å†…è§¦å‘ã€‚

---

## æ£€å®šè§„åˆ™ï¼ˆCoC 7.0ï¼‰

| ç»“æœ | æ¡ä»¶ |
|------|------|
| å¤§æˆåŠŸ | éª°å‡º 1 |
| æéš¾æˆåŠŸ | â‰¤ æŠ€èƒ½å€¼ Ã· 5 |
| å›°éš¾æˆåŠŸ | â‰¤ æŠ€èƒ½å€¼ Ã· 2 |
| æˆåŠŸ | â‰¤ æŠ€èƒ½å€¼ |
| å¤±è´¥ | > æŠ€èƒ½å€¼ |
| å¤§å¤±è´¥ | æŠ€èƒ½å€¼ < 50 æ—¶éª°å‡º 96â€“100ï¼›æˆ–éª°å‡º 100 |

æ¯æ¬¡æ·éª°åéª°å¨˜ä¼šå¼•ç”¨ä¸€å¥å¯¹åº”ç»“æœçš„ä¸­æ–‡èå£«æ¯”äºšå°è¯ã€‚

---

## äººç‰©å¡å½•å…¥æµç¨‹

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨ç”Ÿæˆ

```
@éª°å¨˜ .coc        â† ç”Ÿæˆ1ç»„å±æ€§
@éª°å¨˜ .coc 5      â† ç”Ÿæˆ5ç»„ä¾›é€‰æ‹©
@éª°å¨˜ .save       â† ä¿å­˜ç¬¬1ç»„
@éª°å¨˜ .save 3     â† ä¿å­˜ç¬¬3ç»„
```

ä¿å­˜åç”¨ `.template` è¡¥å½•æŠ€èƒ½ç‚¹ã€‚

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å½•å…¥

```
@éª°å¨˜ .template
```

éª°å¨˜ä¼šç§ä¿¡å‘é€å¡«å†™æ¨¡æ¿ã€‚å°†æ•°å­—æ”¹ä¸ºå®é™…å€¼åï¼Œåœ¨ç¾¤é‡Œå‘é€ï¼š

```
@éª°å¨˜ .st åŠ›é‡ 65 ä½“è´¨ 70 ä½“å‹ 80 æ•æ· 60 å¤–è²Œ 55 æ™ºåŠ› 75 æ„å¿— 60 æ•™è‚² 80 å¹¸è¿ 50 SAN 60 ä¾¦æŸ¥ 65 è†å¬ 40 æ€¥æ•‘ 30
```

> å·²é€šè¿‡ `.coc` ä¿å­˜åŸºç¡€å±æ€§çš„ç©å®¶ï¼Œ`.template` åªå‘æŠ€èƒ½éƒ¨åˆ†ï¼Œä¸é‡å¤å½•å…¥ã€‚

### å±æ€§å®¡æ ¸

å½•å…¥æ—¶è‡ªåŠ¨æ ¡éªŒï¼š

- **ç¡¬æ€§é”™è¯¯**ï¼ˆæ‹’ç»ä¿å­˜ï¼‰ï¼šä»»ä½•å€¼è¶…å‡º 0â€“99
- **è½¯æ€§è­¦å‘Š**ï¼ˆä¿å­˜å¹¶æç¤ºï¼‰ï¼š
  - åŠ›é‡/ä½“è´¨/æ•æ·/å¤–è²Œ/æ„å¿—/å¹¸è¿ åº”åœ¨ **15â€“90**ï¼ˆ3d6Ã—5ï¼‰
  - ä½“å‹/æ™ºåŠ›/æ•™è‚² åº”åœ¨ **40â€“90**ï¼ˆ(2d6+6)Ã—5ï¼‰
  - SAN ä¸åº”è¶…è¿‡å½“å‰æ„å¿—å€¼

---

## KPï¼ˆä¸»æŒäººï¼‰åŠŸèƒ½

æ¯ä¸ªç¾¤å¯ä»¥æœ‰ä¸€å KPï¼ŒKP æ‹¥æœ‰é¢å¤–çš„ä¸»æŒäººä¸“å±æŒ‡ä»¤ã€‚

### è®¤é¢†ä¸ç®¡ç†

```
@éª°å¨˜ .kp              â† æŸ¥çœ‹å½“å‰KPåŠæŒ‡ä»¤åˆ—è¡¨
@éª°å¨˜ .kp claim        â† è®¤é¢†æœ¬åœºKPï¼ˆå·²æœ‰KPæ—¶æ— æ³•æŠ¢å ï¼‰
@éª°å¨˜ .kp resign       â† æ”¾å¼ƒKPèº«ä»½
```

### KP ä¸“å±æŒ‡ä»¤

**ç§˜å¯†æ£€å®š**
```
@éª°å¨˜ .kp rc ä¾¦æŸ¥ 60
@éª°å¨˜ .kp rc è†å¬ 40 b   â† å¸¦å¥–åŠ±éª°
```
ç¾¤å†…åªæ˜¾ç¤º `ğŸ”’ KP è¿›è¡Œäº†ç§˜å¯†æ£€å®š`ï¼Œå®Œæ•´ç»“æœï¼ˆéª°å€¼ã€æˆåŠŸç­‰çº§ã€èå£«æ¯”äºšå°è¯ï¼‰ç§ä¿¡å‘ç»™ KPã€‚

**NPC æ£€å®š**
```
@éª°å¨˜ .kp npc æ·±æ½œè€… æ–—æ®´ 45
@éª°å¨˜ .kp npc æ•™æˆ å›¾ä¹¦é¦†ä½¿ç”¨ 70 p
```
ä»¥ NPC åä¹‰è¿›è¡Œæ£€å®šï¼Œç»“æœåœ¨ç¾¤å†…å…¬å¼€æ˜¾ç¤ºã€‚

**NPC ç†æ™ºæ£€å®š**
```
@éª°å¨˜ .kp sc 55 1d3/1d10
```
å¯¹ NPC è¿›è¡Œç†æ™ºæ£€å®šï¼Œç»“æœåœ¨ç¾¤å†…å…¬å¼€æ˜¾ç¤ºã€‚

### è¯´æ˜

- KP èº«ä»½**æŒ‰ç¾¤å­˜å‚¨**ï¼Œä¸åŒç¾¤äº’ä¸å½±å“
- åŒä¸€æ—¶é—´æ¯ç¾¤åªèƒ½æœ‰ä¸€å KP
- é KP ä½¿ç”¨ä¸“å±æŒ‡ä»¤æ—¶ä¼šæç¤ºå½“å‰ KP æ˜¯è°

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 16+
- ä¸€ä¸ªå¾®ä¿¡è´¦å·ï¼ˆç”¨äºç™»å½•éª°å¨˜ï¼‰

### å®‰è£…

```bash
cd bot-js
npm install
```

### å¯åŠ¨

```bash
node index.js
```

é¦–æ¬¡å¯åŠ¨ä¼šæ‰“å°äºŒç»´ç é“¾æ¥ï¼Œç”¨æ‰‹æœºå¾®ä¿¡æ‰«ç ç™»å½•å³å¯ã€‚ç™»å½•åéª°å¨˜è‡ªåŠ¨åœ¨çº¿ï¼Œåœ¨ç¾¤å†… @å¥¹ å‘æŒ‡ä»¤å³å¯ä½¿ç”¨ã€‚

> **æ³¨æ„**ï¼šä½¿ç”¨çš„æ˜¯å¾®ä¿¡ç½‘é¡µåè®®ï¼ˆwechaty-puppet-wechat4uï¼‰ï¼Œæ— éœ€ tokenï¼Œä½†éœ€ä¿æŒç½‘ç»œç¨³å®šã€‚

---

## æ•°æ®å­˜å‚¨

| æ–‡ä»¶ | å†…å®¹ |
|------|------|
| `data/players.json` | ç©å®¶æ•°æ®ï¼Œä»¥ `è”ç³»äººID:ç¾¤ID` ä¸º keyï¼Œä¸åŒç¾¤ç›¸äº’ç‹¬ç«‹ |
| `data/rooms.json` | æ¯ä¸ªç¾¤çš„ KP ä¿¡æ¯ |

---

## é¡¹ç›®ç»“æ„

```
bot-js/
â”œâ”€â”€ index.js                  # å…¥å£ï¼ŒWechaty äº‹ä»¶å¤„ç†
â”œâ”€â”€ shakespeare.js            # èå£«æ¯”äºšè¯­å½•åº“
â”œâ”€â”€ handlers/
â”‚   â””â”€â”€ messageHandler.js     # æŒ‡ä»¤è§£æä¸åˆ†å‘
â”œâ”€â”€ dice/
â”‚   â”œâ”€â”€ roller.js             # åŸºç¡€æ·éª°ï¼ˆå«å¥–åŠ±/æƒ©ç½šéª°ï¼‰
â”‚   â”œâ”€â”€ skillCheck.js         # æŠ€èƒ½æ£€å®š
â”‚   â”œâ”€â”€ sanCheck.js           # ç†æ™ºæ£€å®š
â”‚   â”œâ”€â”€ opposed.js            # å¯¹æŠ—æ£€å®š
â”‚   â”œâ”€â”€ combat.js             # æˆ˜æ–—æ£€å®šä¸ä¼¤å®³
â”‚   â”œâ”€â”€ charGen.js            # è§’è‰²ç”Ÿæˆ
â”‚   â””â”€â”€ luck.js               # å¹¸è¿æ¶ˆè€—
â””â”€â”€ storage/
    â””â”€â”€ jsonStore.js          # JSON æŒä¹…åŒ–
```

---

## License

MIT
