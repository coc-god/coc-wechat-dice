'use strict'

const QUOTES = {
  大成功: [
    '「人是多么了不起的杰作！理性多么高贵！才能多么无限！」——《哈姆雷特》',
    '「我们知道自己是什么，却不知道自己能成为什么。」——《哈姆雷特》',
    '「全世界是一个舞台，所有的男男女女不过是演员。」——《皆大欢喜》',
    '「被盗者若能含笑，便从盗贼那里夺回了一些东西。」——《奥赛罗》',
    '「凡是过往，皆为序章。」——《暴风雨》',
  ],
  极难成功: [
    '「逆境有其妙用，它如同癞蛤蟆虽然丑陋有毒，却能孕育宝玉。」——《皆大欢喜》',
    '「命运不是由星星决定的，而是由我们自己决定的。」——《裘力斯·凯撒》',
    '「有些船，顺流而来，并非人力所操舵。」——《辛白林》',
    '「我们的材料和梦一样，小小的一生，是睡眠围拢起来的。」——《暴风雨》',
  ],
  困难成功: [
    '「宁可提前三小时到，也不要迟到一分钟。」——《温莎的风流娘儿们》',
    '「谨慎的怀疑是智者的明灯。」——《特洛伊罗斯与克瑞西达》',
    '「事情做得好而认真，便无所畏惧。」——《亨利八世》',
    '「忘恩负义的儿女比毒蛇的利齿还要刺心。」——《李尔王》',
  ],
  成功: [
    '「结局好，一切都好。」——《终成眷属》',
    '「做了的事就算做了。」——《麦克白》',
    '「金光闪闪的未必都是金子。」——《威尼斯商人》',
    '「晚安，晚安！分离是如此甜蜜的悲伤。」——《罗密欧与朱丽叶》',
    '「爱过方知情深，醉过方知酒浓。」——《皆大欢喜》',
  ],
  失败: [
    '「懦夫在死亡前就已经死了许多次，勇敢的人一生只死一次。」——《裘力斯·凯撒》',
    '「亲爱的布鲁图斯，错误不在于我们的命运，而在于我们自己。」——《裘力斯·凯撒》',
    '「生存还是毁灭，这是个问题。」——《哈姆雷特》',
    '「期望是一切心碎的根源。」——《哈姆雷特》',
    '「真爱的路上从无坦途。」——《仲夏夜之梦》',
  ],
  大失败: [
    '「啊，我是命运的弄人！」——《罗密欧与朱丽叶》',
    '「出去，该死的污点！出去，我说！」——《麦克白》',
    '「我是个卑鄙的懦夫和奴才！」——《哈姆雷特》',
    '「地狱空荡荡，魔鬼在人间。」——《暴风雨》',
    '「现在是我们不满的冬天。」——《理查三世》',
    '「连你也有份，布鲁图斯？」——《裘力斯·凯撒》',
  ],
}

const ROLL_BUCKETS = [
  { max: 1,   level: '大成功' },
  { max: 20,  level: '极难成功' },
  { max: 50,  level: '成功' },
  { max: 80,  level: '失败' },
  { max: 99,  level: '失败' },
  { max: 100, level: '大失败' },
]

function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)]
}

function quoteForLevel(level) {
  return pick(QUOTES[level] || QUOTES['成功'])
}

function quoteForRoll(total) {
  const bucket = ROLL_BUCKETS.find(b => total <= b.max) || ROLL_BUCKETS.at(-1)
  return quoteForLevel(bucket.level)
}

module.exports = { quoteForLevel, quoteForRoll }
